##### detail.html #####

### script ###
<script>
    let realtimeParkingLots = [];

    async function loadRealtimeParkingData() {
      try {
        const res = await fetch('/api/realtime_parking/');
        const data = await res.json();
        realtimeParkingLots = data;

        updateAvailableCounts();
      } catch (e) {
        realtimeParkingLots = [];
        console.error('실시간 주차 데이터 로딩 실패', e);
      }
    }

    function updateAvailableCounts() {
      document.querySelectorAll('.stat').forEach(statEl => {
        const pkplcId = statEl.dataset.pkplcid;
        const matched = realtimeParkingLots.find(item => item.pkplcId == pkplcId);
        const availableDiv = statEl.querySelector('.available-count');

        if (availableDiv) {
          if (matched) {
            availableDiv.textContent = `${matched.avblPklotCnt}`;
          } else {
            availableDiv.textContent = '-';
          }
        }
      });
    }

    loadRealtimeParkingData();
  </script>

### stats / stat(1) ###
<div class="stat" data-pkplcid="{{ lot.pkplcId }}">
            <div class="k">주차 구획수</div>
            <div class="v">{{ lot.capacity|default:"-" }}<span style="font-size:12px; margin-left:4px; color:var(--muted);font-weight:600">대</span></div>
            <div class="available-count"></div>
          </div>
